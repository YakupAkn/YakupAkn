<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Gravity Dodge | YDA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = { theme: { extend: { colors: { bgDark: '#0a0a0a', primary: '#00d4ff', danger: '#ff0055' } } } }
    </script>
</head>
<body class="bg-bgDark text-white h-screen flex flex-col items-center justify-center overflow-hidden">
    <div class="absolute top-10 text-center">
        <h1 class="text-3xl font-black italic">GRAVITY <span class="text-danger">DODGE</span></h1>
        <p class="text-sm text-gray-400">Mouse ile kaç!</p>
    </div>

    <canvas id="dodgeCanvas" width="400" height="600" class="bg-white/5 border-x border-white/10 shadow-2xl"></canvas>

    <div class="mt-4 flex gap-4">
        <button id="restartBtn" class="hidden px-6 py-2 bg-danger text-white font-bold rounded-full animate-bounce" onclick="resetGame()">TEKRAR DENE</button>
        <a href="index.html" class="px-6 py-2 text-sm text-gray-500 hover:text-white">ÇIKIŞ</a>
    </div>

    <script>
        const canvas = document.getElementById('dodgeCanvas');
        const ctx = canvas.getContext('2d');
        let player = { x: 200, y: 550, size: 20 };
        let enemies = [];
        let score = 0;
        let gameRunning = true;
        let speedMultiplier = 3;

        // Mouse takibi
        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            player.x = e.clientX - rect.left;
        });

        function spawnEnemy() {
            const size = Math.random() * 40 + 20;
            enemies.push({
                x: Math.random() * (canvas.width - size),
                y: -50,
                size: size,
                speed: Math.random() * 2 + speedMultiplier
            });
        }

        function update() {
            if (!gameRunning) return;

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Oyuncu Çiz
            ctx.fillStyle = '#00d4ff';
            ctx.shadowBlur = 15;
            ctx.shadowColor = '#00d4ff';
            ctx.beginPath();
            ctx.arc(player.x, player.y, player.size/2, 0, Math.PI*2);
            ctx.fill();
            ctx.shadowBlur = 0;

            // Düşmanlar
            if (Math.random() < 0.05) spawnEnemy();

            ctx.fillStyle = '#ff0055';
            for (let i = 0; i < enemies.length; i++) {
                let e = enemies[i];
                e.y += e.speed;
                ctx.fillRect(e.x, e.y, e.size, e.size);

                // Çarpışma Kontrolü (Basit Kare-Daire)
                if (
                    player.x > e.x && 
                    player.x < e.x + e.size && 
                    player.y > e.y && 
                    player.y < e.y + e.size
                ) {
                    gameOver();
                }

                // Ekran dışına çıkanları sil ve skor ver
                if (e.y > canvas.height) {
                    enemies.splice(i, 1);
                    score++;
                    if(score % 10 === 0) speedMultiplier += 0.5; // Zorlaş
                    i--;
                }
            }

            // Skor Yazısı
            ctx.fillStyle = "white";
            ctx.font = "20px Arial";
            ctx.fillText("Skor: " + score, 10, 30);

            requestAnimationFrame(update);
        }

        function gameOver() {
            gameRunning = false;
            document.getElementById('restartBtn').classList.remove('hidden');
            ctx.fillStyle = "rgba(0,0,0,0.7)";
            ctx.fillRect(0,0,canvas.width, canvas.height);
            ctx.fillStyle = "white";
            ctx.font = "40px Arial";
            ctx.textAlign = "center";
            ctx.fillText("OYUN BİTTİ", canvas.width/2, canvas.height/2);
        }

        function resetGame() {
            enemies = [];
            score = 0;
            speedMultiplier = 3;
            gameRunning = true;
            document.getElementById('restartBtn').classList.add('hidden');
            update();
        }

        update();
    </script>
</body>
</html>